#! /usr/bin/env node
// const sourceMapSupport = require('@cspotcode/source-map-support');
require('ts-node').register({
  typeCheck: false,
  transpileOnly: true,
});

// const cacheMap = {};
// const extensions = ['.ts'];

// sourceMapSupport.install({
//   environment: 'auto',
//   retrieveFile: function (path) {
//     console.log('path', path, cacheMap[path])
//     process.exit()
//     return cacheMap[path];
//   },
//   retrieveSourceMap(...args) {
//     console.log(args);
//     process.exit()
//   }
// });

// extensions.forEach(ext => {
//   const originalExtension = require.extensions[ext];
//   require.extensions[ext] = (module, filePath) => {
//     const originalCompile = module._compile;
//     module._compile = function(code, filePath) {
//       // console.log('code', code);
//       cacheMap[filePath] = code;
//       return originalCompile.call(this, code, filePath);
//     };
//     return originalExtension(module, filePath);
//   };
// })

require('../dist/run.js');
